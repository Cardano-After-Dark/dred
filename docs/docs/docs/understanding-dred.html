<!DOCTYPE html><html class="antialiased [font-feature-settings:&#x27;ss01&#x27;]" lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><title>undefined - Docs</title><meta name="next-head-count" content="3"/><script>
  let isDarkMode = window.matchMedia('(prefers-color-scheme: dark)')

  function updateTheme(theme) {
    theme = theme ?? window.localStorage.theme ?? 'system'

    if (theme === 'dark' || (theme === 'system' && isDarkMode.matches)) {
      document.documentElement.classList.add('dark')
    } else if (theme === 'light' || (theme === 'system' && !isDarkMode.matches)) {
      document.documentElement.classList.remove('dark')
    }

    return theme
  }

  function updateThemeWithoutTransitions(theme) {
    updateTheme(theme)
    document.documentElement.classList.add('[&_*]:!transition-none')
    window.setTimeout(() => {
      document.documentElement.classList.remove('[&_*]:!transition-none')
    }, 0)
  }

  document.documentElement.setAttribute('data-theme', updateTheme())

  new MutationObserver(([{ oldValue }]) => {
    let newValue = document.documentElement.getAttribute('data-theme')
    if (newValue !== oldValue) {
      try {
        window.localStorage.setItem('theme', newValue)
      } catch {}
      updateThemeWithoutTransitions(newValue)
    }
  }).observe(document.documentElement, { attributeFilter: ['data-theme'], attributeOldValue: true })

  isDarkMode.addEventListener('change', () => updateThemeWithoutTransitions())
</script><link rel="preload" href="/dred/_next/static/css/6c2112a413c20834.css" as="style"/><link rel="stylesheet" href="/dred/_next/static/css/6c2112a413c20834.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/dred/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/dred/_next/static/chunks/webpack-5bd33fc8517bb91e.js" defer=""></script><script src="/dred/_next/static/chunks/framework-23bb51c2d15fac13.js" defer=""></script><script src="/dred/_next/static/chunks/main-b7f99aa96a2312f8.js" defer=""></script><script src="/dred/_next/static/chunks/pages/_app-a25c5175f1382763.js" defer=""></script><script src="/dred/_next/static/chunks/0c298033-2a7fa1dcffc007f7.js" defer=""></script><script src="/dred/_next/static/chunks/83-45f34a7e76ab8b0c.js" defer=""></script><script src="/dred/_next/static/chunks/pages/docs/understanding-dred-652e1fb5faffa67a.js" defer=""></script><script src="/dred/_next/static/tkWSfBYewE9vFpOU9PCdX/_buildManifest.js" defer=""></script><script src="/dred/_next/static/tkWSfBYewE9vFpOU9PCdX/_ssgManifest.js" defer=""></script></head><body class="bg-white dark:bg-slate-900"><div id="__next"><header class="sticky top-0 z-50 flex flex-wrap items-center justify-between bg-white px-4 py-5 shadow-md shadow-slate-900/5 transition duration-500 dark:shadow-none sm:px-6 lg:px-8 dark:bg-transparent"><div class="mr-6 flex lg:hidden"><button type="button" class="relative" aria-label="Open navigation"><svg aria-hidden="true" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" class="h-6 w-6 stroke-slate-500"><path d="M4 7h16M4 12h16M4 17h16"></path></svg></button><div style="position:fixed;top:1px;left:1px;width:1px;height:0;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0;display:none"></div></div><div class="relative flex flex-grow basis-0 items-center"><a aria-label="Home page" href="/dred"><svg aria-hidden="true" viewBox="0 0 36 36" fill="none" class="h-9 w-9 lg:hidden"><g fill="none" stroke="#38BDF8" stroke-linejoin="round" stroke-width="3"><path d="M10.308 5L18 17.5 10.308 30 2.615 17.5 10.308 5z"></path><path d="M18 17.5L10.308 5h15.144l7.933 12.5M18 17.5h15.385L25.452 30H10.308L18 17.5z"></path></g></svg><svg aria-hidden="true" viewBox="0 0 227 36" fill="none" class="hidden h-9 w-auto fill-slate-700 dark:fill-sky-100 lg:block"><g fill="none" stroke="#38BDF8" stroke-linejoin="round" stroke-width="3"><path d="M10.308 5L18 17.5 10.308 30 2.615 17.5 10.308 5z"></path><path d="M18 17.5L10.308 5h15.144l7.933 12.5M18 17.5h15.385L25.452 30H10.308L18 17.5z"></path></g><text x="38.8" y="25.5" fill="#ffffff" font-weight="bold" font-size="x-large">DRED</text></svg></a></div><div class="-my-5 mr-6 sm:mr-8 md:mr-0"><button type="button" class="group flex h-6 w-6 items-center justify-center sm:justify-start md:h-auto md:w-80 md:flex-none md:rounded-lg md:py-2.5 md:pl-4 md:pr-3.5 md:text-sm md:ring-1 md:ring-slate-200 md:hover:ring-slate-300 dark:md:bg-slate-800/75 dark:md:ring-inset dark:md:ring-white/5 dark:md:hover:bg-slate-700/40 dark:md:hover:ring-slate-500 lg:w-96"><svg aria-hidden="true" viewBox="0 0 20 20" class="h-5 w-5 flex-none fill-slate-400 group-hover:fill-slate-500 dark:fill-slate-500 md:group-hover:fill-slate-400"><path d="M16.293 17.707a1 1 0 0 0 1.414-1.414l-1.414 1.414ZM9 14a5 5 0 0 1-5-5H2a7 7 0 0 0 7 7v-2ZM4 9a5 5 0 0 1 5-5V2a7 7 0 0 0-7 7h2Zm5-5a5 5 0 0 1 5 5h2a7 7 0 0 0-7-7v2Zm8.707 12.293-3.757-3.757-1.414 1.414 3.757 3.757 1.414-1.414ZM14 9a4.98 4.98 0 0 1-1.464 3.536l1.414 1.414A6.98 6.98 0 0 0 16 9h-2Zm-1.464 3.536A4.98 4.98 0 0 1 9 14v2a6.98 6.98 0 0 0 4.95-2.05l-1.414-1.414Z"></path></svg><span class="sr-only md:not-sr-only md:ml-2 md:text-slate-500 md:dark:text-slate-400">Search docs</span></button></div><div class="relative flex basis-0 justify-end gap-6 sm:gap-8 md:flex-grow"><div class="relative z-10" data-headlessui-state=""><label class="sr-only" id="headlessui-listbox-label-:R1j36:" data-headlessui-state="">Theme</label><button class="flex h-6 w-6 items-center justify-center rounded-lg shadow-md shadow-black/5 ring-1 ring-black/5 dark:bg-slate-700 dark:ring-inset dark:ring-white/5" id="headlessui-listbox-button-:R2j36:" type="button" aria-haspopup="listbox" aria-expanded="false" data-headlessui-state=""><svg aria-hidden="true" viewBox="0 0 16 16" class="hidden h-4 w-4 fill-sky-400 [[data-theme=light]_&amp;]:block"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 1a1 1 0 0 1 2 0v1a1 1 0 1 1-2 0V1Zm4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm2.657-5.657a1 1 0 0 0-1.414 0l-.707.707a1 1 0 0 0 1.414 1.414l.707-.707a1 1 0 0 0 0-1.414Zm-1.415 11.313-.707-.707a1 1 0 0 1 1.415-1.415l.707.708a1 1 0 0 1-1.415 1.414ZM16 7.999a1 1 0 0 0-1-1h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 1-1ZM7 14a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm-2.536-2.464a1 1 0 0 0-1.414 0l-.707.707a1 1 0 0 0 1.414 1.414l.707-.707a1 1 0 0 0 0-1.414Zm0-8.486A1 1 0 0 1 3.05 4.464l-.707-.707a1 1 0 0 1 1.414-1.414l.707.707ZM3 8a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Z"></path></svg><svg aria-hidden="true" viewBox="0 0 16 16" class="hidden h-4 w-4 fill-sky-400 [[data-theme=dark]_&amp;]:block"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.23 3.333C7.757 2.905 7.68 2 7 2a6 6 0 1 0 0 12c.68 0 .758-.905.23-1.332A5.989 5.989 0 0 1 5 8c0-1.885.87-3.568 2.23-4.668ZM12 5a1 1 0 0 1 1 1 1 1 0 0 0 1 1 1 1 0 1 1 0 2 1 1 0 0 0-1 1 1 1 0 1 1-2 0 1 1 0 0 0-1-1 1 1 0 1 1 0-2 1 1 0 0 0 1-1 1 1 0 0 1 1-1Z"></path></svg><svg aria-hidden="true" viewBox="0 0 16 16" class="hidden h-4 w-4 fill-slate-400 [:not(.dark)[data-theme=system]_&amp;]:block"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 1a1 1 0 0 1 2 0v1a1 1 0 1 1-2 0V1Zm4 7a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm2.657-5.657a1 1 0 0 0-1.414 0l-.707.707a1 1 0 0 0 1.414 1.414l.707-.707a1 1 0 0 0 0-1.414Zm-1.415 11.313-.707-.707a1 1 0 0 1 1.415-1.415l.707.708a1 1 0 0 1-1.415 1.414ZM16 7.999a1 1 0 0 0-1-1h-1a1 1 0 1 0 0 2h1a1 1 0 0 0 1-1ZM7 14a1 1 0 1 1 2 0v1a1 1 0 1 1-2 0v-1Zm-2.536-2.464a1 1 0 0 0-1.414 0l-.707.707a1 1 0 0 0 1.414 1.414l.707-.707a1 1 0 0 0 0-1.414Zm0-8.486A1 1 0 0 1 3.05 4.464l-.707-.707a1 1 0 0 1 1.414-1.414l.707.707ZM3 8a1 1 0 0 0-1-1H1a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Z"></path></svg><svg aria-hidden="true" viewBox="0 0 16 16" class="hidden h-4 w-4 fill-slate-400 [.dark[data-theme=system]_&amp;]:block"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.23 3.333C7.757 2.905 7.68 2 7 2a6 6 0 1 0 0 12c.68 0 .758-.905.23-1.332A5.989 5.989 0 0 1 5 8c0-1.885.87-3.568 2.23-4.668ZM12 5a1 1 0 0 1 1 1 1 1 0 0 0 1 1 1 1 0 1 1 0 2 1 1 0 0 0-1 1 1 1 0 1 1-2 0 1 1 0 0 0-1-1 1 1 0 1 1 0-2 1 1 0 0 0 1-1 1 1 0 0 1 1-1Z"></path></svg></button></div><a target="_blank" class="group" aria-label="GitHub" href="https://github.com/cardano-after-dark/dred"><svg aria-hidden="true" viewBox="0 0 16 16" class="h-6 w-6 fill-slate-400 group-hover:fill-slate-500 dark:group-hover:fill-slate-300"><path d="M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z"></path></svg></a></div></header><div class="relative mx-auto flex max-w-8xl justify-center sm:px-2 lg:px-8 xl:px-12"><div class="hidden lg:relative lg:block lg:flex-none"><div class="absolute inset-y-0 right-0 w-[50vw] bg-slate-50 dark:hidden"></div><div class="absolute top-16 bottom-0 right-0 hidden h-12 w-px bg-gradient-to-t from-slate-800 dark:block"></div><div class="absolute top-28 bottom-0 right-0 hidden w-px bg-slate-800 dark:block"></div><div class="sticky top-[4.5rem] -ml-0.5 h-[calc(100vh-4.5rem)] overflow-y-auto overflow-x-hidden py-16 pl-0.5"><nav class="text-base lg:text-sm w-64 pr-8 xl:w-72 xl:pr-16"><ul role="list" class="space-y-9"><li><h2 class="font-display font-medium text-slate-900 dark:text-white">Introduction</h2><ul role="list" class="mt-2 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200"><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred">Getting started</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/installation">Installation</a></li></ul></li><li><h2 class="font-display font-medium text-slate-900 dark:text-white">Core concepts</h2><ul role="list" class="mt-2 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200"><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full font-semibold text-sky-500 before:bg-sky-500" href="/dred/docs/understanding-dred">Understanding Dred</a></li></ul></li><li><h2 class="font-display font-medium text-slate-900 dark:text-white">Ecosystem guides</h2><ul role="list" class="mt-2 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200"><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/node-operations">Operating a Dred node</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/register-neighbor">Registering a Neighbor</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/context">Context</a></li></ul></li><li><h2 class="font-display font-medium text-slate-900 dark:text-white">API reference</h2><ul role="list" class="mt-2 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200"><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/api-DredClient">Dred Client</a></li></ul></li><li><h2 class="font-display font-medium text-slate-900 dark:text-white">Contributing</h2><ul role="list" class="mt-2 space-y-2 border-l-2 border-slate-100 dark:border-slate-800 lg:mt-4 lg:space-y-4 lg:border-slate-200"><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/how-to-contribute">How to contribute</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/architecture-guide">Architecture guide</a></li><li class="relative"><a class="block w-full pl-3.5 before:pointer-events-none before:absolute before:-left-1 before:top-1/2 before:h-1.5 before:w-1.5 before:-translate-y-1/2 before:rounded-full text-slate-500 before:hidden before:bg-slate-300 hover:text-slate-600 hover:before:block dark:text-slate-400 dark:before:bg-slate-700 dark:hover:text-slate-300" href="/dred/docs/design-principles">Design principles</a></li></ul></li></ul></nav></div></div><div class="min-w-0 max-w-2xl flex-auto px-4 py-16 lg:max-w-none lg:pr-0 lg:pl-8 xl:px-16"><article><header class="mb-9 space-y-1"><p class="font-display text-sm font-medium text-sky-500">Core concepts</p></header><div class="prose prose-slate max-w-none dark:prose-invert dark:text-slate-400 prose-headings:scroll-mt-28 prose-headings:font-display prose-headings:font-normal lg:prose-headings:scroll-mt-[8.5rem] prose-lead:text-slate-500 dark:prose-lead:text-slate-400 prose-a:font-semibold dark:prose-a:text-sky-400 prose-a:no-underline prose-a:shadow-[inset_0_-2px_0_0_var(--tw-prose-background,#fff),inset_0_calc(-1*(var(--tw-prose-underline-size,4px)+2px))_0_0_var(--tw-prose-underline,theme(colors.sky.300))] hover:prose-a:[--tw-prose-underline-size:6px] dark:[--tw-prose-background:theme(colors.slate.900)] dark:prose-a:shadow-[inset_0_calc(-1*var(--tw-prose-underline-size,2px))_0_0_var(--tw-prose-underline,theme(colors.sky.800))] dark:hover:prose-a:[--tw-prose-underline-size:6px] prose-pre:rounded-xl prose-pre:bg-slate-900 prose-pre:shadow-lg dark:prose-pre:bg-slate-800/60 dark:prose-pre:shadow-none dark:prose-pre:ring-1 dark:prose-pre:ring-slate-300/10 dark:prose-hr:border-slate-800"><h1>About Dred</h1><p>The Dred project was inspired by the need for the Poker dApp to have a shared communication channel, transmitting messages between multiple participants in a shared channel to support the poker game.  In the poker game, as with many other cases of multi-user behaviors, a shared message channel enables a set of participants to have a shared stream of updates, to which any [authorized] player can add their content.</p><p>Dred provides a realtime shared-message channel capability for dApps, served in a decentralized manner by a number of servers.  Applications using the provided Dred client library can easily connect to the contributing server cluster, and subsets of users in those applications can start sharing private realtime messaging.  Application developers need not operate any messaging servers, and the protocol ensure that operating servers are solely responsible for relaying opaque messages to the participants in the protocol.</p><h2 id="message-protocol-summary">Message Protocol summary</h2><p>The Dred message protocol is intentionally simple and easy to understand; it uses HTTP with simple streaming (chunked) responses for server-to-client communication.  Messages sent from one channel member are immediately forwarded to all the other channel members.</p><p>For client-to-server message delivery, it is compatible with HTTP/2 and HTTP/3 connections (for sending through a pre-existing connection), while maintaining a simple one-message/one-connection mental model (<code>POST /channel/:id/ \n\n { message: &lt;JSON&gt; }</code>).</p><p>A Dred client library (or direct access to Dred) could be written in any language, given developer knowledge of HTTP, JSON, a basic crypto library, and access to a chain-indexing server for discovering servers that may be registered to serve their application.  The <code>dred-client</code> Typescript library provides a reference implementation, while also providing a turnkey interface for Javascript and Typescript developers to start adding multi-user realtime message-channel capabilities to their dApps.</p><p>As a result, client-app developers can easily build real-time messaging functions either directly for end-users (e.g. chat use-cases) or as a primitive for higher-level multi-user use-cases benefiting from shared state.</p><h2 id="compared-to-web-rtc">Compared to WebRTC</h2><p>For the poker game, WebRTC and its data-channels feature was also considered, with the acknowledged caveat that one or more coordination servers (STUN and TURN for message relaying) would be needed to ensure connectivity between clients having one or more intervening firewalls.</p><p>By establishing instead a simple dedicated HTTP-based message protocol served by a distributed set of lightweight nodes contributing to the hosting and relaying, clients will trivially connect to a shared event stream, without knowledge or operation of abstruse STUN/TURN protocols and coordination servers.</p><p>Because the Dred network is decentralized, message delivery can be more reliable in the case of partial network-connectivity problems, and the network will tend to receive messages naturally through alternate node/node connections.</p><h2 id="functional-and-operational-protocol">Functional and Operational Protocol</h2><h3 id="functional-layers">Functional layers</h3><p>The messaging protocol is built in three essential layers: message storage and relaying (Redis and node.js), message-encryption atop the basic messaging capabilities to provide a secure shared channel, and on-chain mechanisms for server registration.  The nodes supporting the channel are expected to collaborate, relaying messages to each other.</p><p>Although the relayed messages are expected to have a clear-text component (for server-to-server coordination &amp; relay-signalling metadata), these messages are expected to also contain encrypted payloads.</p><p>The encryption layer then enables the client library and/or applications to share signalling details that are opaque to the hosting servers; these details can be used by the application to hold neighborhood servers to account for performance problems, reliability problems, failure to relay messages or to do so in a timely manner.</p><p>Meanwhile, the encrypted payloads are also expected to contain content directly relevant to user-facing functions of the applications.</p><h3 id="user-programmer-layer">User/Programmer layer</h3><p>dApps wanting realtime collaboration for transactions or any case of user-to-user state-sharing can follow simple sequences with options to give the flexibility useful for their application:</p><ul><li>discover &quot;neighborhood&quot; servers, known to provide messaging services for your application, and connect to them without bothering the person looking at their browser loading your app.</li><li>join automatically to multiple neighborhood servers.</li><li>create, list and join channels; present these in your application any way you prefer to dream up.</li><li>subscribe to notifications for new events in any channel(s); the notification triggers your event-listening callback.</li></ul><p>Developers are welcome check our sample application to see a way to use state-machines for a high-reliability UI and to get a sense of the programmatic flow in connecting to the Dred network.  This sample app drives through a process that reveals each step in the Dred network protocol.  A version of this state machine would be a great building-block for the next version of <code>DredClient.ts</code>.</p><h3 id="operational-model">Operational Model</h3><p>Operationally, each node may serve one or more &quot;neighborhoods&quot;, where each neighborhood may represent a specific app; all the servers registered within that neighborhood are expected to replicate to each other (see more about the Relay protocol below).  Each neighborhood would likely be comprised of many message-channels (for many different subsets of users on that application).</p><p>In order to give decentralization and operational redundancy, a relay protocol is defined, giving each node the responsibility to replicate messages it receives to other nodes that have not yet received the message, while skipping retransmission of those messages to nodes that are already known to have the messages.  This low-redundancy smart gossip protocol offers assurance of message delivery while minimizing bandwidth waste that would be implicit in an naively aggressive fire-and-forget gossip approach.</p><p>One outcome of this approach is that end-user client software can connect to perhaps 2-3 of the registered servers for an application and have assurance that if even one of those servers is functioning accurately, that they&#x27;ll get reliable message delivery - even if their collaborators are connected to a different subset of the nodes in that neighborhood.  Other performance benefits are expected as well.  Developers leveraging the TypeScript library will easily get these results automatically and without need to implement any of the details</p><h4>Performance Expectations</h4><p>As an additional benefit of the decentralized operational model, performance characteristics are expected to be very strong: clients on a sufficiently-resourced neighborhood should expect highly reliable message delivery, with good latency characteristics.</p><p>A simple statistical analysis shows that as the neighborhood gains 3 nodes and beyond, the probability of message loss drops asymptotically to zero, while the maximum message delay is reduced to a function of the sum of minimum-latencies on the shortest path between two clients, where the path is determined by the neighborhood nodes having healthy cross-links.</p><p>These operational metrics are expected to improve in direct relationship to the number of nodes actively contributing in the neighborhood, though possibly having a U-shaped response curve with returns diminishing if the product of message-volume and number of contributing nodes rises to a level causing resource-contention for a particular node.</p><p>In such a case, that particular node may become dysfunctional, while clients would be unaffected - as long as they are connected to at least one node not unduly affected by the bottleneck.  The lowest-resource nodes (in terms of network bandwidth, memory and CPU capacity) in a neighborhood would be expected to be affected first.</p><h4>Scaling</h4><p>By applying Redis as a shared-memory store, with RPC-like performance and a data-streaming model that lets every client receive very-low-latency notification of new content, there is a natural affinity for vertical scalability that is not very common among other operational data stores (e.g. sql or nosql databases); with the caveat that only specific kinds of data sharing would be a good match for the capabilities (don&#x27;t treat Dred like a SQL DB : ).  Realtime messaging is a great fit.</p><p>If needed, an application can scale itself horizontally, by partitioning itself into multiple neighborhoods.  Also, a neighborhood node can scale itself horizontally by operating additional instances of the Dred Server (node.js), connected to a shared Redis instance; a network node operator may also benefit (and be able to serve more application neighborhoods with greater reliability) if they have expertise in operation of Redis cluster and Redis replication techniques</p><p>Message channels are currently contemplated as being ephemeral in nature, created at need and expiring after a maximum lifetime, after a maximum idle-timeout, or both.  Future work may employ some non-Redis persistence mechanism to support persistence and/or extended-lifetime message channels, while continuing to leverage Redis for low-latency message propagation.  TBD: Node operators should be able to opt in to protocol parameters within certain boundaries, in order to self-manage the resources and balance the service-level they provide to their served neighborhoods.</p><h3 id="creating-a-dred-neighborhood">Creating a Dred Neighborhood</h3><p>Creation of a Dred neighborhood is expected to involve a simple chunk of metadata posted in a transaction on-chain, following a defined convention indicating details about that neighborhood (for instance, its name and a URL for its UI application).  The operational details of initial neighborhood registration, including a possible tokenization smart-contract protocol, are still TBD.</p><h4>Adding a server to a Neighborhood</h4><p>Given a Neighborhood has been created, the adding of a server to that neighborhood is expected to involve a simple chunk of metadata, following a defined convention that indicates sufficient details about that server (such as its IP address or DNS name), so that it can be used in service-discovery.  A v0.5 or bootstrapping-phase version of this metadata may be complete without further details or validation.</p><p>As the Dred protocol is further developed, it is likely that a smart-contract will need to be involved, enforcing such details as...</p><ul><li>Token-holding requirements for node-operators</li><li>DID for server operator (for rev-share distributions)</li><li>Server key(s) registered</li><li>Proof of secure connectivity (SSL/TLS encryption with valid cert)</li><li>Proof of protocol-compliance</li></ul></div></article><dl class="mt-12 flex border-t border-slate-200 pt-6 dark:border-slate-800"><div><dt class="font-display text-sm font-medium text-slate-900 dark:text-white">Previous</dt><dd class="mt-1"><a class="text-base font-semibold text-slate-500 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300" href="/dred/docs/installation"><span aria-hidden="true">←</span> <!-- -->Installation</a></dd></div><div class="ml-auto text-right"><dt class="font-display text-sm font-medium text-slate-900 dark:text-white">Next</dt><dd class="mt-1"><a class="text-base font-semibold text-slate-500 hover:text-slate-600 dark:text-slate-400 dark:hover:text-slate-300" href="/dred/docs/node-operations">Operating a Dred node<!-- --> <span aria-hidden="true">→</span></a></dd></div></dl></div><div class="hidden xl:sticky xl:top-[4.5rem] xl:-mr-6 xl:block xl:h-[calc(100vh-4.5rem)] xl:flex-none xl:overflow-y-auto xl:py-16 xl:pr-6"><nav aria-labelledby="on-this-page-title" class="w-56"><h2 id="on-this-page-title" class="font-display text-sm font-medium text-slate-900 dark:text-white">On this page</h2><ol role="list" class="mt-4 space-y-3 text-sm"><li><h3><a class="text-sky-500" href="/dred/docs/understanding-dred#message-protocol-summary">Message Protocol summary</a></h3></li><li><h3><a class="font-normal text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" href="/dred/docs/understanding-dred#compared-to-web-rtc">Compared to WebRTC</a></h3></li><li><h3><a class="font-normal text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300" href="/dred/docs/understanding-dred#functional-and-operational-protocol">Functional and Operational Protocol</a></h3><ol role="list" class="mt-2 space-y-3 pl-5 text-slate-500 dark:text-slate-400"><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="/dred/docs/understanding-dred#functional-layers">Functional layers</a></li><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="/dred/docs/understanding-dred#user-programmer-layer">User/Programmer layer</a></li><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="/dred/docs/understanding-dred#operational-model">Operational Model</a></li><li><a class="hover:text-slate-600 dark:hover:text-slate-300" href="/dred/docs/understanding-dred#creating-a-dred-neighborhood">Creating a Dred Neighborhood</a></li></ol></li></ol></nav></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"markdoc":{"content":[{"$$mdtype":"Tag","name":"h1","attributes":{},"children":["About Dred"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The Dred project was inspired by the need for the Poker dApp to have a shared communication channel, transmitting messages between multiple participants in a shared channel to support the poker game.  In the poker game, as with many other cases of multi-user behaviors, a shared message channel enables a set of participants to have a shared stream of updates, to which any [authorized] player can add their content."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Dred provides a realtime shared-message channel capability for dApps, served in a decentralized manner by a number of servers.  Applications using the provided Dred client library can easily connect to the contributing server cluster, and subsets of users in those applications can start sharing private realtime messaging.  Application developers need not operate any messaging servers, and the protocol ensure that operating servers are solely responsible for relaying opaque messages to the participants in the protocol."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"message-protocol-summary"},"children":["Message Protocol summary"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The Dred message protocol is intentionally simple and easy to understand; it uses HTTP with simple streaming (chunked) responses for server-to-client communication.  Messages sent from one channel member are immediately forwarded to all the other channel members."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For client-to-server message delivery, it is compatible with HTTP/2 and HTTP/3 connections (for sending through a pre-existing connection), while maintaining a simple one-message/one-connection mental model (",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["POST /channel/:id/ \\n\\n { message: \u003cJSON\u003e }"]},")."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A Dred client library (or direct access to Dred) could be written in any language, given developer knowledge of HTTP, JSON, a basic crypto library, and access to a chain-indexing server for discovering servers that may be registered to serve their application.  The ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["dred-client"]}," Typescript library provides a reference implementation, while also providing a turnkey interface for Javascript and Typescript developers to start adding multi-user realtime message-channel capabilities to their dApps."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["As a result, client-app developers can easily build real-time messaging functions either directly for end-users (e.g. chat use-cases) or as a primitive for higher-level multi-user use-cases benefiting from shared state."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"compared-to-web-rtc"},"children":["Compared to WebRTC"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["For the poker game, WebRTC and its data-channels feature was also considered, with the acknowledged caveat that one or more coordination servers (STUN and TURN for message relaying) would be needed to ensure connectivity between clients having one or more intervening firewalls."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["By establishing instead a simple dedicated HTTP-based message protocol served by a distributed set of lightweight nodes contributing to the hosting and relaying, clients will trivially connect to a shared event stream, without knowledge or operation of abstruse STUN/TURN protocols and coordination servers."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Because the Dred network is decentralized, message delivery can be more reliable in the case of partial network-connectivity problems, and the network will tend to receive messages naturally through alternate node/node connections."]},{"$$mdtype":"Tag","name":"h2","attributes":{"id":"functional-and-operational-protocol"},"children":["Functional and Operational Protocol"]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"functional-layers"},"children":["Functional layers"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The messaging protocol is built in three essential layers: message storage and relaying (Redis and node.js), message-encryption atop the basic messaging capabilities to provide a secure shared channel, and on-chain mechanisms for server registration.  The nodes supporting the channel are expected to collaborate, relaying messages to each other."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Although the relayed messages are expected to have a clear-text component (for server-to-server coordination \u0026 relay-signalling metadata), these messages are expected to also contain encrypted payloads."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["The encryption layer then enables the client library and/or applications to share signalling details that are opaque to the hosting servers; these details can be used by the application to hold neighborhood servers to account for performance problems, reliability problems, failure to relay messages or to do so in a timely manner."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Meanwhile, the encrypted payloads are also expected to contain content directly relevant to user-facing functions of the applications."]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"user-programmer-layer"},"children":["User/Programmer layer"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["dApps wanting realtime collaboration for transactions or any case of user-to-user state-sharing can follow simple sequences with options to give the flexibility useful for their application:"]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["discover \"neighborhood\" servers, known to provide messaging services for your application, and connect to them without bothering the person looking at their browser loading your app."]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["join automatically to multiple neighborhood servers."]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["create, list and join channels; present these in your application any way you prefer to dream up."]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["subscribe to notifications for new events in any channel(s); the notification triggers your event-listening callback."]}]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Developers are welcome check our sample application to see a way to use state-machines for a high-reliability UI and to get a sense of the programmatic flow in connecting to the Dred network.  This sample app drives through a process that reveals each step in the Dred network protocol.  A version of this state machine would be a great building-block for the next version of ",{"$$mdtype":"Tag","name":"code","attributes":{},"children":["DredClient.ts"]},"."]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"operational-model"},"children":["Operational Model"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Operationally, each node may serve one or more \"neighborhoods\", where each neighborhood may represent a specific app; all the servers registered within that neighborhood are expected to replicate to each other (see more about the Relay protocol below).  Each neighborhood would likely be comprised of many message-channels (for many different subsets of users on that application)."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["In order to give decentralization and operational redundancy, a relay protocol is defined, giving each node the responsibility to replicate messages it receives to other nodes that have not yet received the message, while skipping retransmission of those messages to nodes that are already known to have the messages.  This low-redundancy smart gossip protocol offers assurance of message delivery while minimizing bandwidth waste that would be implicit in an naively aggressive fire-and-forget gossip approach."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["One outcome of this approach is that end-user client software can connect to perhaps 2-3 of the registered servers for an application and have assurance that if even one of those servers is functioning accurately, that they'll get reliable message delivery - even if their collaborators are connected to a different subset of the nodes in that neighborhood.  Other performance benefits are expected as well.  Developers leveraging the TypeScript library will easily get these results automatically and without need to implement any of the details"]},{"$$mdtype":"Tag","name":"h4","attributes":{},"children":["Performance Expectations"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["As an additional benefit of the decentralized operational model, performance characteristics are expected to be very strong: clients on a sufficiently-resourced neighborhood should expect highly reliable message delivery, with good latency characteristics."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["A simple statistical analysis shows that as the neighborhood gains 3 nodes and beyond, the probability of message loss drops asymptotically to zero, while the maximum message delay is reduced to a function of the sum of minimum-latencies on the shortest path between two clients, where the path is determined by the neighborhood nodes having healthy cross-links."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["These operational metrics are expected to improve in direct relationship to the number of nodes actively contributing in the neighborhood, though possibly having a U-shaped response curve with returns diminishing if the product of message-volume and number of contributing nodes rises to a level causing resource-contention for a particular node."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["In such a case, that particular node may become dysfunctional, while clients would be unaffected - as long as they are connected to at least one node not unduly affected by the bottleneck.  The lowest-resource nodes (in terms of network bandwidth, memory and CPU capacity) in a neighborhood would be expected to be affected first."]},{"$$mdtype":"Tag","name":"h4","attributes":{},"children":["Scaling"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["By applying Redis as a shared-memory store, with RPC-like performance and a data-streaming model that lets every client receive very-low-latency notification of new content, there is a natural affinity for vertical scalability that is not very common among other operational data stores (e.g. sql or nosql databases); with the caveat that only specific kinds of data sharing would be a good match for the capabilities (don't treat Dred like a SQL DB : ).  Realtime messaging is a great fit."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["If needed, an application can scale itself horizontally, by partitioning itself into multiple neighborhoods.  Also, a neighborhood node can scale itself horizontally by operating additional instances of the Dred Server (node.js), connected to a shared Redis instance; a network node operator may also benefit (and be able to serve more application neighborhoods with greater reliability) if they have expertise in operation of Redis cluster and Redis replication techniques"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Message channels are currently contemplated as being ephemeral in nature, created at need and expiring after a maximum lifetime, after a maximum idle-timeout, or both.  Future work may employ some non-Redis persistence mechanism to support persistence and/or extended-lifetime message channels, while continuing to leverage Redis for low-latency message propagation.  TBD: Node operators should be able to opt in to protocol parameters within certain boundaries, in order to self-manage the resources and balance the service-level they provide to their served neighborhoods."]},{"$$mdtype":"Tag","name":"h3","attributes":{"id":"creating-a-dred-neighborhood"},"children":["Creating a Dred Neighborhood"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Creation of a Dred neighborhood is expected to involve a simple chunk of metadata posted in a transaction on-chain, following a defined convention indicating details about that neighborhood (for instance, its name and a URL for its UI application).  The operational details of initial neighborhood registration, including a possible tokenization smart-contract protocol, are still TBD."]},{"$$mdtype":"Tag","name":"h4","attributes":{},"children":["Adding a server to a Neighborhood"]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["Given a Neighborhood has been created, the adding of a server to that neighborhood is expected to involve a simple chunk of metadata, following a defined convention that indicates sufficient details about that server (such as its IP address or DNS name), so that it can be used in service-discovery.  A v0.5 or bootstrapping-phase version of this metadata may be complete without further details or validation."]},{"$$mdtype":"Tag","name":"p","attributes":{},"children":["As the Dred protocol is further developed, it is likely that a smart-contract will need to be involved, enforcing such details as..."]},{"$$mdtype":"Tag","name":"ul","attributes":{},"children":[{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Token-holding requirements for node-operators"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["DID for server operator (for rev-share distributions)"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Server key(s) registered"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Proof of secure connectivity (SSL/TLS encryption with valid cert)"]},{"$$mdtype":"Tag","name":"li","attributes":{},"children":["Proof of protocol-compliance"]}]}],"frontmatter":{},"file":{"path":"/docs/understanding-dred.md"}}},"__N_SSG":true},"page":"/docs/understanding-dred","query":{},"buildId":"tkWSfBYewE9vFpOU9PCdX","assetPrefix":"/dred","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>